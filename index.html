<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Deksel Wissel</title>

<style>
body {
    font-family: Arial;
    padding: 20px;
    background: #f5f5f5;
}

.app {
    max-width: 400px;
    margin: auto;
    background: white;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}

label {
    font-weight: bold;
    display:block;
    margin-top:10px;
}

input, select {
    width: 100%;
    padding: 8px;
    margin-top:5px;
}

button {
    padding: 10px;
    width: 100%;
    font-size: 18px;
    margin-top:15px;
    border: none;
    border-radius: 10px;
    background: #28a745;
    color: white;
    cursor:pointer;
}

#output {
    margin-top: 20px;
    font-size: 18px;
}

.tab-buttons {
    display:flex;
    gap:10px;
    margin-bottom:15px;
}

.tab-buttons button {
    flex:1;
    font-size:16px;
    background:#28a745;
    color:white;
    padding:8px;
    border-radius:8px;
    border:none;
    cursor:pointer;
}

.tab-buttons button.active {
    background:#19692c;
    font-weight:bold;
}

/* Titel met logo */
.title-bar {
    display:flex;
    align-items:center;
    background:#28a745;
    color:white;
    padding:10px;
    border-radius:8px;
    margin-bottom:15px;
}

.title-bar img {
    height:40px;
    width:auto;
    margin-right:10px;
    object-fit:contain;
}

.title-bar h2 {
    margin:0;
    font-size:20px;
}
</style>
</head>

<body>
<div class="app">

    <!-- TITEL -->
    <div class="title-bar">
        <img src="martens_logo.png" alt="Brouwerij Martens">
        <h2>ðŸ“¦ Deksel Wissel</h2>
    </div>

    <!-- TABS -->
    <div class="tab-buttons">
        <button id="tabBlik3" class="active">BLIK3</button>
        <button id="tabBlik4">BLIK4</button>
    </div>

    <label>Inhoud blik (33 of 50):</label>
    <input type="number" id="volume" placeholder="33 of 50">

    <label>Rest op teller (liter):</label>
    <input type="number" id="rest" placeholder="Aantal liter">

    <label>Deksel nu:</label>
    <select id="deksel_nu"></select>

    <label>Deksel na ombouw:</label>
    <select id="deksel_na"></select>

    <button onclick="bereken()">Bereken</button>

    <div id="output"></div>
</div>

<script>
const deksels = ["UDD00001","VAD0048","VAD0053","VAD0070"];

const dekselNu = document.getElementById("deksel_nu");
const dekselNa = document.getElementById("deksel_na");

function vulDropdowns() {
    dekselNu.innerHTML = "";
    dekselNa.innerHTML = "";
    deksels.forEach(d=>{
        let o1 = document.createElement("option");
        o1.value = d;
        o1.text = d;
        dekselNu.appendChild(o1);

        let o2 = document.createElement("option");
        o2.value = d;
        o2.text = d;
        dekselNa.appendChild(o2);
    });
}
vulDropdowns();

// Tabs
let huidigBlik = 3;

document.getElementById("tabBlik3").onclick = () => {
    huidigBlik = 3;
    tabBlik3.classList.add("active");
    tabBlik4.classList.remove("active");
};

document.getElementById("tabBlik4").onclick = () => {
    huidigBlik = 4;
    tabBlik4.classList.add("active");
    tabBlik3.classList.remove("active");
};

function bereken() {
    let volume = parseInt(volume.value);
    let rest = parseFloat(rest.value);
    let nu = dekselNu.value;
    let na = dekselNa.value;

    if (![33,50].includes(volume)) {
        alert("Volume moet 33 of 50 zijn");
        return;
    }
    if (rest <= 0) {
        alert("Rest moet groter zijn dan 0");
        return;
    }

    let factor = (volume === 33) ? 3 : 2;
    let pakken = (rest * factor) / 680;

    let resultaat = "";
    let plus10 = pakken + 10;
    let min10 = pakken - 10;

    if ((nu==="UDD00001" && na==="VAD0048") || (nu==="VAD0048" && na==="VAD0053")) {
        pakken = min10;
        resultaat = "Aantal pakken: " + pakken.toFixed(2) +
            "<br><span style='color:red'>Leeg laten lopen + kleur scheiden</span>";
    } else if (nu==="VAD0070" || na==="VAD0070") {
        resultaat = "Aantal pakken: " + pakken.toFixed(2) +
            "<br><span style='color:red'>Leeg laten lopen + kleur scheiden</span>";
    } else if (na==="VAD0048") {
        resultaat = "Aantal pakken: " + plus10.toFixed(2) +
            "<br><span style='color:green'>Nieuwe deksels mogen gewoon achteraan</span>";
    } else {
        resultaat = "Aantal pakken: " + pakken.toFixed(2) +
            "<br><span style='color:red'>Leeg laten lopen + kleur scheiden</span>";
    }

    if (huidigBlik === 4) {
        resultaat = resultaat.replace(
            /Aantal pakken: ([\d.]+)/,
            (_, v) => "Aantal pakken: " + (parseFloat(v) - 2).toFixed(2)
        );
    }

    output.innerHTML = resultaat;
}
</script>
</body>
</html>
